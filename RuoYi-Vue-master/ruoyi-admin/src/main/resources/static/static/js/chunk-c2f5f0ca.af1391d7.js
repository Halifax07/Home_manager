(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2f5f0ca"],{"04d1":function(t,e,r){"use strict";var n=r("342f"),i=n.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"1c59":function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"1e5a":function(t,e,r){"use strict";var n=r("23e7"),i=r("9961"),a=r("dad2");n({target:"Set",proto:!0,real:!0,forced:!a("symmetricDifference")},{symmetricDifference:i})},"1e70":function(t,e,r){"use strict";var n=r("23e7"),i=r("a5f7"),a=r("dad2");n({target:"Set",proto:!0,real:!0,forced:!a("difference")},{difference:i})},"36db":function(t,e,r){"use strict";r("9088")},"384f":function(t,e,r){"use strict";var n=r("e330"),i=r("5388"),a=r("cb27"),s=a.Set,o=a.proto,c=n(o.forEach),u=n(o.keys),f=u(new s).next;t.exports=function(t,e,r){return r?i({iterator:u(t),next:f},e):c(t,e)}},"395e":function(t,e,r){"use strict";var n=r("dc19"),i=r("cb27").has,a=r("8e16"),s=r("7f65"),o=r("5388"),c=r("2a62");t.exports=function(t){var e=n(this),r=s(t);if(a(e)<r.size)return!1;var u=r.getIterator();return!1!==o(u,(function(t){if(!i(e,t))return c(u,"normal",!1)}))}},"4e82":function(t,e,r){"use strict";var n=r("23e7"),i=r("e330"),a=r("59ed"),s=r("7b0b"),o=r("07fa"),c=r("083a"),u=r("577e"),f=r("d039"),d=r("addb"),l=r("a640"),v=r("04d1"),h=r("d998"),p=r("2d00"),m=r("512ce"),x=[],b=i(x.sort),g=i(x.push),C=f((function(){x.sort(void 0)})),y=f((function(){x.sort(null)})),w=l("sort"),S=!f((function(){if(p)return p<70;if(!(v&&v>3)){if(h)return!0;if(m)return m<603;var t,e,r,n,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)x.push({k:e+n,v:r})}for(x.sort((function(t,e){return e.v-t.v})),n=0;n<x.length;n++)e=x[n].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),z=C||!y||!w||!S,_=function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:u(e)>u(r)?1:-1}};n({target:"Array",proto:!0,forced:z},{sort:function(t){void 0!==t&&a(t);var e=s(this);if(S)return void 0===t?b(e):b(e,t);var r,n,i=[],u=o(e);for(n=0;n<u;n++)n in e&&g(i,e[n]);d(i,_(t)),r=o(i),n=0;while(n<r)e[n]=i[n++];while(n<u)c(e,n++);return e}})},"512ce":function(t,e,r){"use strict";var n=r("342f"),i=n.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},5388:function(t,e,r){"use strict";var n=r("c65b");t.exports=function(t,e,r){var i,a,s=r?t:t.iterator,o=t.next;while(!(i=n(o,s)).done)if(a=e(i.value),void 0!==a)return a}},6062:function(t,e,r){"use strict";r("1c59")},6566:function(t,e,r){"use strict";var n=r("7c73"),i=r("edd0"),a=r("6964"),s=r("0366"),o=r("19aa"),c=r("7234"),u=r("2266"),f=r("c6d2"),d=r("4754"),l=r("2626"),v=r("83ab"),h=r("f183").fastKey,p=r("69f3"),m=p.set,x=p.getterFor;t.exports={getConstructor:function(t,e,r,f){var d=t((function(t,i){o(t,l),m(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),v||(t.size=0),c(i)||u(i,t[f],{that:t,AS_ENTRIES:r})})),l=d.prototype,p=x(e),b=function(t,e,r){var n,i,a=p(t),s=g(t,e);return s?s.value=r:(a.last=s={index:i=h(e,!0),key:e,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=s),n&&(n.next=s),v?a.size++:t.size++,"F"!==i&&(a.index[i]=s)),t},g=function(t,e){var r,n=p(t),i=h(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key===e)return r};return a(l,{clear:function(){var t=this,e=p(t),r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),r=r.next;e.first=e.last=void 0,e.index=n(null),v?e.size=0:t.size=0},delete:function(t){var e=this,r=p(e),n=g(e,t);if(n){var i=n.next,a=n.previous;delete r.index[n.index],n.removed=!0,a&&(a.next=i),i&&(i.previous=a),r.first===n&&(r.first=i),r.last===n&&(r.last=a),v?r.size--:e.size--}return!!n},forEach:function(t){var e,r=p(this),n=s(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),a(l,r?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),v&&i(l,"size",{configurable:!0,get:function(){return p(this).size}}),d},setStrong:function(t,e,r){var n=e+" Iterator",i=x(e),a=x(n);f(t,e,(function(t,e){m(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?d("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=void 0,d(void 0,!0))}),r?"entries":"values",!r,!0),l(e)}}},"68df":function(t,e,r){"use strict";var n=r("dc19"),i=r("8e16"),a=r("384f"),s=r("7f65");t.exports=function(t){var e=n(this),r=s(t);return!(i(e)>r.size)&&!1!==a(e,(function(t){if(!r.includes(t))return!1}),!0)}},"72c3":function(t,e,r){"use strict";var n=r("23e7"),i=r("e9bc"),a=r("dad2");n({target:"Set",proto:!0,real:!0,forced:!a("union")},{union:i})},"79a4":function(t,e,r){"use strict";var n=r("23e7"),i=r("d039"),a=r("953b"),s=r("dad2"),o=!s("intersection")||i((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));n({target:"Set",proto:!0,real:!0,forced:o},{intersection:a})},"7f65":function(t,e,r){"use strict";var n=r("59ed"),i=r("825a"),a=r("c65b"),s=r("5926"),o=r("46c4"),c="Invalid size",u=RangeError,f=TypeError,d=Math.max,l=function(t,e){this.set=t,this.size=d(e,0),this.has=n(t.has),this.keys=n(t.keys)};l.prototype={getIterator:function(){return o(i(a(this.keys,this.set)))},includes:function(t){return a(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!==e)throw new f(c);var r=s(e);if(r<0)throw new u(c);return new l(t,r)}},"83b9e":function(t,e,r){"use strict";var n=r("cb27"),i=r("384f"),a=n.Set,s=n.add;t.exports=function(t){var e=new a;return i(t,(function(t){s(e,t)})),e}},"8b00":function(t,e,r){"use strict";var n=r("23e7"),i=r("68df"),a=r("dad2");n({target:"Set",proto:!0,real:!0,forced:!a("isSubsetOf")},{isSubsetOf:i})},"8e16":function(t,e,r){"use strict";var n=r("7282"),i=r("cb27");t.exports=n(i.proto,"size","get")||function(t){return t.size}},9088:function(t,e,r){},"953b":function(t,e,r){"use strict";var n=r("dc19"),i=r("cb27"),a=r("8e16"),s=r("7f65"),o=r("384f"),c=r("5388"),u=i.Set,f=i.add,d=i.has;t.exports=function(t){var e=n(this),r=s(t),i=new u;return a(e)>r.size?c(r.getIterator(),(function(t){d(e,t)&&f(i,t)})):o(e,(function(t){r.includes(t)&&f(i,t)})),i}},9961:function(t,e,r){"use strict";var n=r("dc19"),i=r("cb27"),a=r("83b9e"),s=r("7f65"),o=r("5388"),c=i.add,u=i.has,f=i.remove;t.exports=function(t){var e=n(this),r=s(t).getIterator(),i=a(e);return o(r,(function(t){u(e,t)?f(i,t):c(i,t)})),i}},a4e7:function(t,e,r){"use strict";var n=r("23e7"),i=r("395e"),a=r("dad2");n({target:"Set",proto:!0,real:!0,forced:!a("isSupersetOf")},{isSupersetOf:i})},a5f7:function(t,e,r){"use strict";var n=r("dc19"),i=r("cb27"),a=r("83b9e"),s=r("8e16"),o=r("7f65"),c=r("384f"),u=r("5388"),f=i.has,d=i.remove;t.exports=function(t){var e=n(this),r=o(t),i=a(e);return s(e)<=r.size?c(e,(function(t){r.includes(t)&&d(i,t)})):u(r.getIterator(),(function(t){f(e,t)&&d(i,t)})),i}},a891:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:24}},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("收支概览")])]),r("el-row",{attrs:{gutter:16}},[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"stat-item"},[r("div",{staticClass:"stat-value income"},[t._v(t._s(t.formatAmount(t.overview.totalIncome)))]),r("div",{staticClass:"stat-label"},[t._v("总收入")])])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"stat-item"},[r("div",{staticClass:"stat-value expense"},[t._v(t._s(t.formatAmount(t.overview.totalExpense)))]),r("div",{staticClass:"stat-label"},[t._v("总支出")])])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"stat-item"},[r("div",{staticClass:"stat-value",class:t.overview.balance>=0?"income":"expense"},[t._v(" "+t._s(t.formatAmount(t.overview.balance))+" ")]),r("div",{staticClass:"stat-label"},[t._v("结余")])])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"stat-item"},[r("div",{staticClass:"stat-value"},[t._v(t._s(t.overview.totalTransactions))]),r("div",{staticClass:"stat-label"},[t._v("交易笔数")])])])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("收入分类统计")])]),r("div",{ref:"incomeChart",staticStyle:{height:"400px"}})])],1),r("el-col",{attrs:{span:12}},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("支出分类统计")])]),r("div",{ref:"expenseChart",staticStyle:{height:"400px"}})])],1),r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("近12个月收支趋势")])]),r("div",{ref:"trendChart",staticStyle:{height:"400px"}})])],1)],1)],1)},i=[],a=r("2909"),s=(r("7db0"),r("d81d"),r("14d9"),r("4e82"),r("b0c0"),r("a9e3"),r("d3b7"),r("6062"),r("1e70"),r("79a4"),r("c1a1"),r("8b00"),r("a4e7"),r("1e5a"),r("72c3"),r("3ca3"),r("0643"),r("fffc"),r("4e3e"),r("a573"),r("159b"),r("ddb0"),r("b775"));function o(){return Object(s["a"])({url:"/family/statistics/overview",method:"get"})}function c(){return Object(s["a"])({url:"/family/statistics/income-category",method:"get"})}function u(){return Object(s["a"])({url:"/family/statistics/expense-category",method:"get"})}function f(){return Object(s["a"])({url:"/family/statistics/monthly-trend",method:"get"})}var d=r("313e"),l={name:"Statistics",data:function(){return{overview:{totalIncome:0,totalExpense:0,balance:0,totalTransactions:0},incomeChart:null,expenseChart:null,trendChart:null}},created:function(){this.getStatistics()},mounted:function(){this.initCharts()},beforeDestroy:function(){this.incomeChart&&this.incomeChart.dispose(),this.expenseChart&&this.expenseChart.dispose(),this.trendChart&&this.trendChart.dispose()},methods:{getStatistics:function(){var t=this;o().then((function(e){t.overview=e.data})),c().then((function(e){t.updateIncomeChart(e.data)})),u().then((function(e){t.updateExpenseChart(e.data)})),f().then((function(e){t.updateTrendChart(e.data)}))},initCharts:function(){this.incomeChart=d["init"](this.$refs.incomeChart),this.expenseChart=d["init"](this.$refs.expenseChart),this.trendChart=d["init"](this.$refs.trendChart)},updateIncomeChart:function(t){if(this.incomeChart){var e={title:{text:"收入分类分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"收入分类",type:"pie",radius:"50%",data:t.map((function(t){return{value:t.value,name:t.name}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.incomeChart.setOption(e)}},updateExpenseChart:function(t){if(this.expenseChart){var e={title:{text:"支出分类分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"支出分类",type:"pie",radius:"50%",data:t.map((function(t){return{value:t.value,name:t.name}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.expenseChart.setOption(e)}},updateTrendChart:function(t){if(this.trendChart){var e=Object(a["a"])(new Set(t.map((function(t){return t.month})))).sort(),r=[],n=[];e.forEach((function(e){var i=t.find((function(t){return t.month===e&&"收入"===t.txn_type})),a=t.find((function(t){return t.month===e&&"支出"===t.txn_type}));r.push(i?i.amount:0),n.push(a?a.amount:0)}));var i={title:{text:"月度收支趋势",left:"center"},tooltip:{trigger:"axis"},legend:{data:["收入","支出"]},xAxis:{type:"category",data:e},yAxis:{type:"value"},series:[{name:"收入",type:"line",data:r,itemStyle:{color:"#67C23A"}},{name:"支出",type:"line",data:n,itemStyle:{color:"#F56C6C"}}]};this.trendChart.setOption(i)}},formatAmount:function(t){return null==t?"¥0.00":"¥"+Number(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})}}},v=l,h=(r("36db"),r("2877")),p=Object(h["a"])(v,n,i,!1,null,"107e86af",null);e["default"]=p.exports},addb:function(t,e,r){"use strict";var n=r("f36a"),i=Math.floor,a=function(t,e){var r=t.length;if(r<8){var s,o,c=1;while(c<r){o=c,s=t[c];while(o&&e(t[o-1],s)>0)t[o]=t[--o];o!==c++&&(t[o]=s)}}else{var u=i(r/2),f=a(n(t,0,u),e),d=a(n(t,u),e),l=f.length,v=d.length,h=0,p=0;while(h<l||p<v)t[h+p]=h<l&&p<v?e(f[h],d[p])<=0?f[h++]:d[p++]:h<l?f[h++]:d[p++]}return t};t.exports=a},b4bc:function(t,e,r){"use strict";var n=r("dc19"),i=r("cb27").has,a=r("8e16"),s=r("7f65"),o=r("384f"),c=r("5388"),u=r("2a62");t.exports=function(t){var e=n(this),r=s(t);if(a(e)<=r.size)return!1!==o(e,(function(t){if(r.includes(t))return!1}),!0);var f=r.getIterator();return!1!==c(f,(function(t){if(i(e,t))return u(f,"normal",!1)}))}},c1a1:function(t,e,r){"use strict";var n=r("23e7"),i=r("b4bc"),a=r("dad2");n({target:"Set",proto:!0,real:!0,forced:!a("isDisjointFrom")},{isDisjointFrom:i})},cb27:function(t,e,r){"use strict";var n=r("e330"),i=Set.prototype;t.exports={Set:Set,add:n(i.add),has:n(i.has),remove:n(i["delete"]),proto:i}},d998:function(t,e,r){"use strict";var n=r("342f");t.exports=/MSIE|Trident/.test(n)},dad2:function(t,e,r){"use strict";var n=r("d066"),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=n("Set");try{(new e)[t](i(0));try{return(new e)[t](i(-1)),!1}catch(r){return!0}}catch(a){return!1}}},dc19:function(t,e,r){"use strict";var n=r("cb27").has;t.exports=function(t){return n(t),t}},e9bc:function(t,e,r){"use strict";var n=r("dc19"),i=r("cb27").add,a=r("83b9e"),s=r("7f65"),o=r("5388");t.exports=function(t){var e=n(this),r=s(t).getIterator(),c=a(e);return o(r,(function(t){i(c,t)})),c}}}]);